{% extends "base.html" %}

{% block title %}Login / Signup{% endblock %}

{% block content %}
<div class="auth-container" id="account-page-container">
    <div id="login-form-container">
        <h2>Login</h2>
        <form action="{{ url_for('account') }}" method="POST" autocomplete="on">
            <label for="login-phone"><b>Phone Number</b></label>
            <input type="tel" placeholder="Enter Phone Number" name="phone" id="login-phone" required autocomplete="tel">

            <label for="login-password"><b>Password</b></label>
            <div class="password-wrapper">
                <input type="password" placeholder="Enter Password" name="password" id="login-password" required autocomplete="current-password">
                <i class="fas fa-eye toggle-password" onclick="togglePassword('login-password', this)"></i>
            </div>

            <button type="submit" name="login_submit">Login</button>
        </form>
        <a href="#" id="toggle-signup" class="toggle-link">Don't have an account? Sign Up</a>
    </div>
</div>

<!-- Signup Modal -->
<div id="signupModal" class="modal">
    <div class="modal-content">
        <span class="close-button" id="close-signup">&times;</span>
        <h2>Sign Up</h2>
        <form action="{{ url_for('signup') }}" method="POST" autocomplete="on">
            <label for="signup-name"><b>First Name</b></label>
            <input type="text" placeholder="Enter First Name" name="name" id="signup-name" required autocomplete="given-name">

            <label for="signup-lastname"><b>Last Name</b></label>
            <input type="text" placeholder="Enter Last Name (Optional)" name="lastname" id="signup-lastname" autocomplete="family-name">

            <label for="signup-phone"><b>Phone Number</b></label>
            <input type="tel" placeholder="Enter Phone Number" name="phone" id="signup-phone" required autocomplete="tel">

            <label for="signup-email"><b>Email (Optional)</b></label>
            <input type="email" placeholder="Enter Email" name="email" id="signup-email" autocomplete="email">

            <label for="signup-password"><b>Password</b></label>
            <div class="password-wrapper">
                <input type="password" placeholder="Enter Password" name="psw" id="signup-password" required autocomplete="new-password">
                <i class="fas fa-eye toggle-password" onclick="togglePassword('signup-password', this)"></i>
            </div>

            <label for="signup-password-repeat"><b>Repeat Password</b></label>
            <div class="password-wrapper">
                <input type="password" placeholder="Repeat Password" name="psw-repeat" id="signup-password-repeat" required autocomplete="new-password">
                <i class="fas fa-eye toggle-password" onclick="togglePassword('signup-password-repeat', this)"></i>
            </div>

            <button type="submit">Register</button>
        </form>
        <a href="#" id="toggle-login" class="toggle-link">Already have an account? Login</a>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const signupModal = document.getElementById('signupModal');
    const toggleSignup = document.getElementById('toggle-signup');
    const toggleLogin = document.getElementById('toggle-login');
    const closeBtn = document.getElementById('close-signup');

    toggleSignup.addEventListener('click', function (e) {
        e.preventDefault();
        signupModal.style.display = 'block';
    });

    toggleLogin.addEventListener('click', function (e) {
        e.preventDefault();
        signupModal.style.display = 'none';
    });

    closeBtn.addEventListener('click', function () {
        signupModal.style.display = 'none';
    });

    window.onclick = function (event) {
        if (event.target == signupModal) {
            signupModal.style.display = "none";
        }
    };
});

// Password show/hide
function togglePassword(id, icon) {
    const input = document.getElementById(id);
    if (input.type === "password") {
        input.type = "text";
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
    } else {
        input.type = "password";
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
    }
}
</script>
{% endblock %}
